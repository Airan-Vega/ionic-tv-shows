<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding-bottom ion-padding-start ion-padding-end">
  @if(errorMessage()){
  <app-error [errorMessage]="errorMessage()" (retry)="loadTvShow()" />
  } @else if(isLoading()){
  <app-loading />
  } @else {

  <app-refresh (refresh)="loadTvShow($event)"></app-refresh>

  <ion-label class="ion-padding ion-text-center">
    <h1>{{ tvShow()?.name }}</h1>
  </ion-label>

  <ion-item>
    @if (tvShow()?.rating?.average) {
    <ion-label>Rating:</ion-label>
    <ion-note slot="end" color="primary"
      >{{ tvShow()?.rating?.average }}</ion-note
    >
    }
  </ion-item>

  <ion-grid>
    <ion-row>
      <ion-col class="ion-display-flex ion-justify-content-center" size="12">
        <img class="ion-padding" [src]="tvShow()?.image ?? '' | image" />
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12">
        <ion-label class="ion-text-center" [innerHTML]="tvShow()?.summary">
        </ion-label>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        @if(tvShow()?.genres && tvShow()?.genres?.length){
        <ion-label>Genres: </ion-label>
        @for (genre of tvShow()?.genres; track genre) {

        <ion-chip color="primary">
          <ion-label>{{ genre }}</ion-label>
        </ion-chip>
        } }
      </ion-col>
    </ion-row>
  </ion-grid>
  }
</ion-content>
